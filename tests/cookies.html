<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Test</title>
    <script src="https://cdn.jsdelivr.net/gh/nuxodin/lazyfill@main/mod.min.js"></script>
<body>

<h1>Test</h1>

<script type=module>

import {effect} from '../item.js';
import {cookies} from "../drivers/cookies.js";
import 'https://unpkg.com/uhtml/async';
const {render, html} = uhtml;


window.betterCookies = cookies();

const all = await betterCookies.getAll({ url: location.href }); // fetch it so it's ready for the first render



effect(async () => {
    render(document.getElementById('table'), html`
        <thead>
            <tr>
                <th>key
                <th>value
                <th>
        <tbody>
            ${[...betterCookies].map(item => {
                return html.for(item, item.key)`
                    <tr>
                        <td>${item.key}
                        <td><input value="${item.value}" oninput=${(e)=>item.value=e.target.value}>
                        <td><button onclick="${()=>{item.remove()}}">delete</button>
                `;
            })}
    `);
});

</script>

<div>
    <button onclick="let name=prompt('cookie name'); if(name)betterCookies.item(name).value=''">add cookie</button>
</div>


<h2>Cookie Manager:</h2>

<table id="table"></table>