<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Test</title>
    <script type=module async src="https://cdn.jsdelivr.net/gh/u2ui/u2@main/u2/auto.js"></script>
    <link rel=stylesheet href="https://cdn.jsdelivr.net/gh/u2ui/u2@main/css/classless/simple.css">
<body>

<script type=module>

import {effect} from '../item.js';
import {cookies} from "../drivers/cookies.js";
import { render, html } from "https://esm.sh/uhtml@4";


const betterCookies = cookies();
await betterCookies.getAll({ url: location.href }); // fetch it so it's ready for the first render

effect(() => {
    render(table, html`
        <thead>
            <tr>
                <th> Name
                <th> Value
                <th width=10> <button onclick="${()=>{let name=prompt('cookie name'); if(name)betterCookies.item(name).value=''}}">add</button>
        <tbody>
            ${[...betterCookies].map(item => {
                return html`
                    <tr>
                        <td> ${item.key}
                        <td> <input .value="${item.value??''}" oninput=${(e)=>{item.value=e.target.value}}>
                        <td> <button onclick="${()=>item.remove()}" class=u2-unstyle u2-confirm="delete Cookie?">âœ–</button>
                `;
            })}
    `);
});

</script>


<h1>Cookie Manager</h1>
<table id=table></table>
