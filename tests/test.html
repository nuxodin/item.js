<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Test</title>
    <script type="module" src="../item.js"></script>
<body>

<h1>Test</h1>

<label>
    synced using broadcast channel:<br>
    <input type="text" value="test" id="bcItemInput" oninput="bcItem.item('input').value = this.value">
</label>


<script type=module>

// local storage

import {localStorageInstance, restApi, broadcastChannelItem} from "../item.js";

localStorageInstance.item('random').addEventListener('set', (e) => {
    console.log('change localStorageItem', e.detail);
});
console.log(
    localStorageInstance.item('random').value
)
localStorageInstance.item('random').value = Math.random();



// rest api
const api = restApi('https://restcountries.com/v3.1');

api.item('currency').item('chf').value.then(chf => {
    console.log(chf)
    setTimeout(() => {
        api.item('currency').item('chf').value.then(chf => console.log(chf) );
    }, 100);
});


// broadcast channel
window.bcItem = broadcastChannelItem('testx');
bcItem.item('input').addEventListener('set', (e) => {
    bcItemInput.value = e.detail.newValue;
});

</script>
